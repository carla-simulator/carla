{
    "name": "CARLA 0.9.15.2 (jammy)",
    "image": "carla-0.9.15.2-ue4-jammy-dev",

    "initializeCommand": "./Scripts/build_image.sh",

    // We do NOT need to set "remoteUser" if the Dockerfile's default user is already correct
    // but you can if you want to be explicit. Also "updateRemoteUserUID" can be false, since
    // our Dockerfile already set the user to our exact UID/GID.
    "updateRemoteUserUID": false,

    "customizations": {
      "vscode": {
        "settings": {
          "terminal.integrated.shell.linux": "bash"
        },
        "extensions": [
          "ms-vscode.cpptools"
        ]
      }
    },

    // You can still keep your postStartCommand
    "postStartCommand": "bash", 

    // runArgs to set a container name + stable hostname
    "runArgs": [
      "--rm",
      "--name", "carla-0.9.15.2-ue4-jammy-devcontainer",
      "--hostname", "carla-devcontainer",
      // DO NOT pass --user here (we want the Dockerfile default user, not an override)
      // NOTE: UE4_ROOT needs to be set on your host environment variables 
      // "--volume", "${localEnv:UE4_ROOT}:/opt/UnrealEngine_4.26",
      "--volume", "/tmp/.X11-unix:/tmp/.X11-unix",         // Share X11 socket
      "--env", "DISPLAY=${localEnv:DISPLAY}",              // Pass host DISPLAY variable
      // "--env", "QT_X11_NO_MITSHM=1",                       // Avoid shared memory issues
      // "--env", "XDG_RUNTIME_DIR=${localEnv:XDG_RUNTIME_DIR}" // For Wayland (if needed)
      "--gpus", "all"
    ]
}
